\documentclass[8pt,compress,aspectratio=169]{beamer}
\usepackage{multicol} \usepackage{graphics}
%\usepackage{cascadia-code}
\usepackage{listings}
\usepackage{soul}
\usepackage[default]{sourcesanspro}
\usepackage[T1]{fontenc}
\usepackage[font=tiny]{caption}
%\renewcommand*\familydefault{\ttdefault} %% Only if the base font of the document is to be typewriter style
\newcommand\LightBold[1]{\textcolor{VSBlueLight}{\textbf{#1}}}
\newcommand\DarkBold[1]{\textcolor{VSBlueDark}{\textbf{#1}}}
\newcommand\DarkBoldP[1]{\textcolor{VSPurpleDark}{\textbf{#1}}}
\usepackage[T1]{fontenc}

\usetheme{Dark}


% Title Slide
\title{Claims Investigation Committee Multi-Input Testing Device}
\subtitle{ECE-4820: Electrical and Computer Engineering Design II}
\author[Garza, Baker, Sah]{Dylan-Matthew Garza \and Daniel Baker \and Rohullah Sah \and}

\institute[VFU] % (optional)
{
      Department of Electrical and Computer Engineering\\
      Western Michigan University
      \and
      ZF Group\\
      Auburn Hills, MI
}
\date{Fall 2024}
\titlegraphic{\includegraphics[height=2cm]{assets/WMU_Logo.png}\hspace{1cm}\includegraphics[height=2cm]{assets/zf.png}}



\begin{document}
%==============================================================================
% Introduction slide
%==============================================================================
\begin{frame}[plain]
  \titlepage
  \small
  \note[item]{Hello everyone}
  \note[item]{Today we are excited to present our ZF-sponsored senior design project}
  \note[item]{the Claims Investigation Commitee Multi-Input Testing Device}
  \note[item]{This is brought to you by myself, Daniel Baker}
  \note[item]{Dylan Garza}
  \note[item]{and Rohullah Sah}
  \begin{multicols}{2}
      Faculty Advisor:\\
      Dr. Janos Grantner\hfill\\
    \hfill{}\makebox[0pt][r]{Sponsor Manager}:\\
    \hfill Patrick McNally
  \end{multicols}
\end{frame}

\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Table of Contents}
    \tableofcontents[currentsection]
  \end{frame}
}
\section{Introduction}

%==============================================================================
% INTRODUCTION SECTION
%==============================================================================
\subsection{ZF}
\begin{frame}
  \frametitle{ZF}
  \begin{minipage}{0.45\textwidth}
    \note[item]{So what is ZF (or zed-eff)}
    \note[item]{ZF is a global leader in automotive technology}
    \note[item]{-specialize in advanced safety systems}
    \note[item]{-vehicle control solutions}
    \note[item]{ZF is a german-based a tier 1 supplier for major automakers like Daimler, Tesla, and Waymo}
    \note[item]{Located in Auburn Hills, ZF North American HQ focuses on commercial vehicle solutions}
    \note[item]{-This is where our project is based}
    \note[item]{-This is also home to the Claims Investigation Center or CIC.}
    \begin{block}{Who is ZF?}
      \begin{itemize}
          \small {
            \item Global technology company and Tier 1 automotive supplier
            \item Provides advanced safety systems and vehicle control solutions
            \item Partners with major OEMs: Daimler, Chrysler, Tesla, Waymo(Google), etc.
            \item A leading innovator in commercial vehicle technology
          }
      \end{itemize}
    \end{block}
    \begin{block}{North American Headquarters}
      \begin{itemize}
          \small {
            \item Project based at ZF Group's North American headquarters in Auburn Hills, MI
            \item Specializes in commercial vehicle solutions
            \item This facility is also home to the Claims Investigation Center
            }
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/misc/zf-office.jpg}
      \caption{Source: \href{google.com}{google.com}\hspace{\textwidth}
      \textit{ZF Group Office in Auburn Hills, MI}}
    \end{figure}
  \end{minipage}
\end{frame}

\subsection{Claims Investigation Committee}
\begin{frame}
  \frametitle{Claims Investigation Committee}
  \note[item]{The Claims Investigation Center}
  \note[item]{-ZF's specialized team for analyzing field failures}
  \note[item]{Like taking your iphone to apple store for repairs}
  \note[item]{-they ensure components meet reliability standards}
  \note[item]{-help improve testing methods for future products}
  \note[item]{Our project supports their goal to enhance testing efficiency, especially for new product lines like the Brake Signal Transmitter}
  \begin{block}{What is the Claims Investigation Center?}
      \begin{itemize}
          \small {
            \item Specialized team focused on testing and initial investigation of field failure parts for commercial vehicles 
            \item Identifies new field failures and determine areas for product improvement
            \item Works closely with Technical Call Centers, Field Quality, and Warranty teams
            \item Ensures readiness to test and analyze new product field returns at launch  
          }
      \end{itemize}
  \end{block}


  \begin{block}{CIC's Role in Our Project}
    \begin{itemize}
        \small {
          \item Requires enhanced testing capabilites for new products
          \item Our project aims to develop a device to streamline testing and data collection
          \item Helps the CIC efficiently validate warranty claims and analyze field returns
          \item Supports the CIC's mission to improve product quality and customer satisfaction
          }
    \end{itemize}
  \end{block}
  \end{frame}

\subsection{Project Motivation}
\begin{frame}
    \frametitle{Motivation for the Project}
      \note[item]{The CIC currently relies on the mBSP ABS Component Tester to validate parts like:}
    \note[item]{-Electronic Control Units}
    \note[item]{-Valves}
    \note[item]{-Pressure sensors}
    \note[item]{Tester has key limitations}
    \note[item]{-It's rigid}
    \note[item]{--focus only on predefined components}
    \note[item]{ -unsuitable for new or prototype components}
    \note[item]{-It's costly}
    \note[item]{ -upgrades require significant effort and manufacturer support}
    \note[item]{-It's slow}
    \note[item]{ -manual setup is a step-by-step process}
    \note[item]{ -increase testing time and human error}
    \note[item]{With projects such as upcoming release of ZF's Brake Signal Transmitter}
    \note[item]{-Issues become critical}
    \note[item]{BST is launching in 2025}
    \note[item]{-Will be used in Daimler}
    \note[item]{-which is the Highest volume commercial vehicle platform in North America}
    \note[item]{-Expected to be most sold product in cvs division}
    \note[item]{A new solution is essential to efficiently analyze returned parts}

    \begin{minipage}{0.475\textwidth}
    \begin{block}{Challenges with Current Testing Methods}
        \begin{itemize}
            \small
            \item Testing on current brake system platform (mBSP) was built and industrialized specifically for that platform
            \item Long lead time and significant cost to release and document
            \item New platform components are not compatible with the current tester
            \item Current tester is not capable of testing in prototype phase
        \end{itemize}
    \end{block}
    \begin{block}{Need for Improvement}
      \small
        \begin{itemize}
          \item The Brake Signal Transmitter's (BST) implementation in Daimler's new platform intensifies urgency
            \item High production volumes require efficient testing methods 
            \item Expanding product line increases testing complexity
        \end{itemize}
    \end{block}
    \end{minipage}
    \hfill
    \begin{minipage}{0.475\textwidth}
        \begin{figure}
          \includegraphics[width=\textwidth]{assets/misc/abs-tester.png}
          \caption{\it Current brake component system tester}
        \end{figure}
    \end{minipage}
\end{frame}


\subsection{Our Solution}
\begin{frame}
    \frametitle{Multi-Input Testing Device}
    \note[item]{Our solution, a multi-input testing device, directly supports CIC}
    \note[item]{it provides a unified testing platform}
    \note[item]{-capable of handling multiple devices across various product lines}
    \note[item]{the device is flexible and adaptable}
    \note[item]{-Designed to accommodate future components}
    \note[item]{-allows us to change acceptance criteria without significant effort}
    \note[item]{it also automates testing.}
    \note[item]{-Reducing manual set up}
    \note[item]{-minimizing human error}
    \note[item]{-improving accuracy}
    \begin{block}{Addressed Challenges}
        \begin{itemize}
            \item Provides a unified testing platform for multiple devices
            \item Flexible and agile to adapt to new product lines
            \item Allows for prototype testing and validation
            \item Automates data collection and analysis to reduce time and errors
            \item Increases testing speed and accuracy
            \item Simplifies validation process for warranty claims
            \item Enhances capability to analyze field returns efficiently
            \item Cost-effective solution
        \end{itemize}
    \end{block}
\end{frame}

\subsection{Key Devices Under Test}
\begin{frame}
    \frametitle{Devices Our Solution Supports}
    \note[item]{Our Multi-Input Testing Device supports several key components}
    \note[item]{-Brake Signal Transmitter or BST}
    \note[item]{ -critical new component for 2025 production}
    \note[item]{ -interprets the driver brake pedal pressure}
    \note[item]{-Continuous Wear Sensor}
    \note[item]{ -Apart of new upcoming brake system platform (mBSP2)}
    \note[item]{ -device monitors brake pad and disc wear}
    \note[item]{ -provides warnings when brakes need maintenance}
    \note[item]{-Pressure sensor}
    \note[item]{ -Apart of previous component tester as well}
    \note[item]{ -measures pressure in vehicle control systems}
    \note[item]{ -included as part of BST design}
    \note[item]{-Electronic Stability Control Module}
    \note[item]{ -Prevents skidding and rollovers}
    \note[item]{ -monitors vehicle stability and intervenes if necessary}
    \note[item]{This Test platform enhances CIC's abilities}
    \begin{block}{Key Devices Under Test (DUTs)}
    \begin{enumerate}
        \item {\DarkBold{Brake Signal Transmitter (BST)}}
        \begin{itemize}
            \item Primary focus - critical new component for 2025 production
            \item Acts as the brain that reads how hard a driver presses the brake.
        \end{itemize}
        \item {\DarkBold{Continuous Wear Sensor (CWS)}}
        \begin{itemize}
            \item Works like a monitor for your brake pads and discs
            \item Warns when brakes are wearing down using voltage
        \end{itemize}
        \item {\DarkBold{Pressure Sensor}}
        \begin{itemize}
            \item Continuously measures relative pressure in vehicle control systems
        \end{itemize}
        \item {\DarkBold{Electronic Stability Control Module (ESCM)}}
            \begin{itemize}
                \item Acts as a safety system that helps prevent skidding and rollovers
                \item Monitors the vehicle's movement and intervenes to keep it stable
            \end{itemize}
    \end{enumerate}
  \end{block}
\end{frame}
%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Project Solution and Overview
%==============================================================================
\section{Design and Implementation}
\subsection{Project Solution and Overview}

\begin{frame}
  \frametitle{Project Solution}
  \centering
  \includegraphics[width=0.5\textwidth]{assets/diagrams/hardware.png}
  \begin{block}{What this project aims to accomplish:}
    \note[item]{using stm32mp157f-dk2, has, Arm Cortex-M4 for external signal handling and Arm Cortex-A7 as 
    an application processor}
    \note[item]{Cortex-M4's primary role is reading signals from the device under test}
    \note[item]{a pwms duty cycle, its frequency, a voltage level through and analog to digital converter and CAN frames}
    \note[item]{processing this information is how the devices will be tested}
    \note[item]{interfacing with the devices under test will also require some hardware for propper signal reading}
    \note[item]{specifically for scaling and managing power and to ensure clean signals with minimal noise}
    \begin{enumerate}
      \item {\DarkBold{Device Interfacing}}
        \begin{enumerate}
          \item Properly read Device Signals using the ARM Cortex-M4 on the onboard microcontroller on the 
            \LightBold{STM32MP157F-DK2}:
            \begin{itemize}
              \item PWM duty cycle
              \item Frequency
              \item Voltages through an analog-to-digital converter (ADC)
              \item CAN frames
            \end{itemize}
        \end{enumerate}
      \item \DarkBold{Physical Components and Hardware}
        \begin{enumerate}
          \item Printed Circuit Board (PCB) for interfacing with DUT
          \item PCB for scaling and managing power for the DUT and to the microcontroller
          \item Enclosure for PCBs and \LightBold{STM32MP157F-DK2} board
        \end{enumerate}
    \end{enumerate}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Project Solution (cont.)}
  \begin{block}{What this project aims to accomplish:}
    \note[item]{the software running is the core to the solution, as it aims to simplify the end user, the person
    running the test on the device}
    \note[item]{The Cortex-A7, the application processor will be running a CUSTOM built linux image}
    \note[item]{it will host a Custom web application in something called web assembly}
    \note[item]{and will interact with a custom webserver that will also handle communication to the 
    Cortex-M4 to gather test data and have it be available for download as a CSV}
    \begin{enumerate}
        \setcounter{enumi}{2}
        \large
      \item \DarkBold{Software}
        \begin{enumerate}
            \large
          \item Custom embedded \textbf{Linux} distribution that will run on the onboard ARM Cortex-A7
            microprocessor on the \LightBold{STM32MP157F-DK2}
          \item Simple user interface on web-based application
          \item Custom Webserver to process information from web application to microcontroller
          \item Communicate collected information from ARM Cortex-M4 to ARM Cortex-A7
          \item Ability to download measured data, formatted as a CSV, through the web application 
        \end{enumerate}
    \end{enumerate}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Comprehensive System Block Diagram}
  \note{Heres a comprehensive high-level block diagram of everything i just described. Due to time constraints 
  I will have to skip over this but this presentation is available for download if you'd like to look at any section
  in more detail}
  \centering
  \includegraphics[height=0.85\paperheight]{assets/diagrams/block_diagram.drawio.png}
\end{frame}
 
%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Gantt Chart
%==============================================================================
\begin{frame}
  \frametitle{Gantt Chart}
  \note{Using Atlassian's Jira, we were able to track the work we needed to do and what tasks to do 
  and what tasks were dependencies on other tasks}
  \centering
  \includegraphics[height=0.85\paperheight]{assets/diagrams/gantt.png}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Budget Projection
%==============================================================================
\begin{frame}
  \frametitle{Budget Projection}
  \note{The following is our budget to show our total costs. The more expensive items like the STM discovery boards
  and the continuous wear sensor
  were provided to us by our sponsor, but the rest was provided by us or was a donation}
  \centering
  \includegraphics[height=0.80\paperheight]{assets/diagrams/budget.png}
\end{frame}

\begin{frame}
  \frametitle{Standards}
  \begin{block}{Used Professional Standards}
    \begin{itemize}
      \item IPC-2221A (Generic Standard on PCB Design)
      \item ISO 26262 (Automotive Functional Safety)
      \item ISO 29119 (Software Testing)
      \item IEC 61508 (Functional Safety of Electrical/Electronic Systems)
      \item IEEE 802.1X (Port-based network access control)

    \end{itemize}
  \end{block}
\end{frame}

\AtBeginSubsection[]
{
  \begin{frame}
    \frametitle{Table of Contents}
    \tableofcontents[currentsubsection]
  \end{frame}
}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Hardware Design
%==============================================================================
\subsection{Hardware Design}
\begin{frame}
  \frametitle{Power Supply Schematic Design}
  \note[item]{Let’s start with the power supply design. Here, the input to our system is through a DC Barrel Jack which supplies 12V DC, but the components like sensors and microcontrollers operate at lower voltages. We use three main voltage regulators: this one ensures the input is smooth and regulated to 12V. }
  \note[item]{Over here, it steps down the 12V to 5V. }
  \note[item]{and the last one is adjustable, steps down 12V further to 3.146V using resistors to act as dividers and capacitors to filter out any electrical noise.}
  \begin{minipage}{0.7\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/pwrsupply.jpg}
      \caption{\it power management system that converts 12V DC input into multiple usable voltage levels.}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{0.275\textwidth}
    \begin{block}{Overview}
      \begin{itemize}
          \small
        \item 12V DC stable voltage using LM7812 (1A)
        \item 12V to 5V DC using LM7805 (1A)
        \item 12V to 3.3V using LM317 adjustable regulator
      \end{itemize}
    \end{block}
    \begin{block}{Key Components}
      \begin{itemize}
          \small
        \item LM7812, LM7805, LM317 voltage regulators for step-down conversion.
        \item Capacitors for noise filtration.
        \item Resistors to set voltages for LM317 as 3.146V DC (50uA).
      \end{itemize}
    \end{block}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Schematic Design - Brake Signal Transmitter}
  \note{Now, let’s move on to the Schematic of the Peripherals. This schematic design shows how the signals of the Brake Signal Transmitter are sent to the microcontroller. The sensor sends PWM signals (.7V – 4.5V) that represent how much force is applied to the brake. Our circuit uses resistors as voltage dividers and capacitors as noise filtering to ensure these signals are stable and within the microcontroller’s safe range to read. Diodes act as a safeguard, preventing voltage spikes or reversed connections from damaging the microcontroller. }
  \begin{minipage}{0.6\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/bst_schem.jpg}
      \caption{Circuit schematic of Brake Signal Transmitter (BST)}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{0.375\textwidth}
    \begin{block}{Key Points}
      \begin{itemize}
        \item Captures the output of the Brake Signal Transmitter (BST) in the form of Pulse Width Modulation (PWM) signals.
        \item Includes resistors and capacitors for signal filtering.
        \item Diodes protect the circuit from voltage surges and reverse polarity.
      \end{itemize}
    \end{block}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Peripheral Interface Schematic Diagram }
  \note[item]{We have the schematic interface of the other three sensors: The Continuous Wear Sensor, which monitors the brake pad wear by outputting a small voltage signal (.7V-4V) |}
  \note[item]{the Pressure Sensor, which measures brake system pressure, outputting a voltage (.5V-4.5V) proportional to the pressure level. We have a capacitor to smooth out the noise in the signal}
  \note[item]{the String Potentiometer, which measures the displacement of the brake pedal and converts it to a proportional voltage (0V-4.75V). For all three schematic designs, we have resistors, which condition the signal so the microcontroller can process it correctly.}
  \begin{minipage}{0.495\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/wear_schem.jpg}
      \caption{Continuous Wear Sensor Interface Schematic}
    \end{figure}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/pressure_schem.jpg}
      \caption{Pressure Sensor Interface Schematic}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{0.49\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/string_pcb.jpg}
      \caption{String Potentiometer Interface Schematic}
    \end{figure}

    \vspace{-0.5cm}
    \begin{block}{Key Points}
      \begin{itemize}
        \item Captures analog voltage signals to monitor brake wear and pressure sensor and displacement on the string potentiometer.
        \item Uses voltage dividers for safe microcontroller input levels.
        \item Uses capacitors to stabilize the output.
      \end{itemize}
    \end{block}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Printed Circuit Board Design}
  \note[item]{Here is the Printed Circuit Board design for our power supply. This board takes 12V DC input from a DC jack and converts it into the usable outputs. }
  \note[item]{This is where we connect the 12V input DC Jack power supply (J1).}
  \note[item]{We have the capacitors over here, to filter out noise and voltage ripples.}
  \note[item]{These are the voltage regulators, to ensure the outputs are stable and consistent even if the input voltage fluctuates.}
  \note[item]{These are the output pins. These ones provide 12V. These provide a regulated 5V and the ones at the bottom provide a 3.146V keeping the resistors as voltage dividers. All components are referenced to a common ground.}
  \begin{minipage}{0.3\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/pwrsupply_pcb.jpg}
      \caption{PCB for Power Management}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{0.675\textwidth}
    \begin{block}{Overview}
      \begin{itemize}
          \small
        \item The power supply PCB converts the 12V DC input from the DC jack into regulated output voltages for the system.
          \begin{itemize}
              \tiny
            \item  12V DC
            \item 5V DC
            \item 3.3V DC
          \end{itemize}
        \item It is designed based on the schematic with components such as voltage regulators (LM7812, LM7805, LM317), capacitors, and resistors.
      \end{itemize}
    \end{block}
    \begin{block}{Key Components}
      \begin{itemize}
          \footnotesize
        \item DC Jack (J1): Connects the input 12V DC power supply to the board.
        \item Output Pins:
          \begin{itemize}
              \tiny
            \item J2/J3: Provides 12V DC output.
            \item J4/J5: Provides 5V DC output.
            \item J6/J7: Provides 3.3V DC output.
          \end{itemize}
        \item Voltage Regulators
          \begin{itemize}
              \tiny
            \item Step-down conversion for different voltage levels.
            \item Smooth and stable output.
          \end{itemize}
        \item Capacitors (C1-C5)
          \begin{itemize}
              \tiny
            \item Ensure smooth voltage output by filtering noise and ripples.
          \end{itemize}
        \item Ground connections: All components are referenced to a common ground for stable operation.
      \end{itemize}
    \end{block}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Peripherals Printed Circuit Board}
  \note[item]{This is the Peripheral PCB Design. We have kept all the components of each sensor separate. This one over here is for BST, we have the Continuous Wear Sensor over here, the Pressure sensor on the right of the board, and the String Potentiometer at the bottom.}
  \note[item]{Each Devices Under Test has its own dedicated connector for both signal input and power supply pin.}
  \note[item]{These pins (J1) capture the PWM signals from the Brake Signal Transmitter, while these pins (J2 and J3) provide the 12V power needed to operate it.}
  \note[item]{Similarly, J8 reads the Pressure Sensor input, and J9 delivers the 12V power required for its operation.}
  \note[item]{These pins connect the Continuous Wear Sensor input, with J13 supplying it with 5V power.}
  \note[item]{Lastly, the String Potentiometer uses J16 for its signal input and receives its 12V power from J17. We have the corresponding electrical components (resistors, capacitors, diodes). }
  \note[item]{The processed signals are sent through specific output pins, while we have a common ground}
  \begin{minipage}{0.5\textwidth}
    \begin{block}{Key Features}
      \begin{itemize}
          \small
        \item Input/Power Pins:
          \begin{itemize}
              \footnotesize
            \item Each DUT has a dedicated connector for input signals and a power signal.
            \item J1: Inputs for BST (PWM1 and PWM2) | J2/J3: 12V Power Signals for BST (PWM1 and PWM2)
            \item J8: Pressure sensor input | J9: 12V DC Power Signal
            \item J12: Wear sensor input | J13: 5V DC Power Signal
            \item J16: String Potentiometer input | J17: 12V DC Power signal
          \end{itemize}
        \item Output Pins:
          \begin{itemize}
              \footnotesize
            \item Processed signals are sent to the microcontroller through the output pins.
            \item J4/J5/J6/J7: BST processed signals
            \item J10/J11: Pressure sensor output
            \item J14/J15: Wear sensor output
            \item J18/J19: String potentiometer output.
          \end{itemize}
        \item Signal Conditioning:
          \begin{itemize}
              \footnotesize
            \item Resistors: Scale signals for safe microcontroller input.
            \item Capacitors: Filter noise and stabilize signals.
            \item Capacitors: Filter noise and stabilize signals.
          \end{itemize}
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/electronic/peri_pcb.jpg}
      \caption{PCB for connecting to peripheral device}
    \end{figure}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Fabricated PCB}
  \note{Here is the fabricated and custom assembled PCB’s. Power management is on the left, and on the right is the Peripheral PCB.}
  \begin{minipage}{0.5\textwidth}
    \begin{figure}
      \includegraphics[width=0.9\textwidth]{assets/electronic/pcb1.jpeg}
      \caption{Power Management PCB}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{.475\textwidth}
  \begin{figure}
    \includegraphics[width=\textwidth]{assets/electronic/pcb2.jpeg}
      \caption{Peripheral Interface PCB}
  \end{figure}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Enclosure Design}
  \note{hese enclosures are custom-designed to securely house the STM board, power supply, and peripheral PCBs. They include slots for the DC jack, ports, and input/output pins, ensuring easy and organized connections. The slots also act as ventilation to keep the temperature stable during testing. Inside, standoffs hold the boards firmly in place, and the two-part assembly allows easy access for repairs, upgrades, or debugging.}
  \begin{minipage}{0.475\textwidth}
    \begin{figure}
      \includegraphics[width=0.95\textwidth]{assets/electronic/stm32_enclosure_final_test_pic1.jpg}
      \includegraphics[width=0.95\textwidth]{assets/electronic/stm32_enclosure_final_testpic2.jpg}
      \caption{\it Enclosure for STM32MP157F-DK2}
    \end{figure}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \begin{figure}
      \includegraphics[width=0.95\textwidth]{assets/electronic/psperi_enclosure_final_testpic1.jpg}
      \includegraphics[width=0.95\textwidth]{assets/electronic/psperi_enclosure_final_testpic2.jpg}
      \caption{\it Enclosure for PCBs}
    \end{figure}
  \end{minipage}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Cortex-M4 Firmware
%==============================================================================
\subsection{Device Interfacing and Testing}
\begin{frame}
  \frametitle{Firmware to Test Brake Signal Transmitter (BST)}
  \note[item]{For the BST, the Cortex-M4 receives signals in the form of pulse-width modulation, or PWM}
  \note[item]{This is a method where signals are turned on and off rapidly}
  \note[item]{2 key parameters define PWM}
  \note[item]{the frequency is how fast these signals are read }
  \note[item]{for BST specifically reads at 200 Hz }
  \note[item]{the pulse is repeated 200 cycles per second}
  \note[item]{The duty cycle of the pulse is what percentage the signal is "on"}
  \note[item]{so a duty cycle of 50}% means the signal is "on" half the time
  \note[item]{The code measures these signals to calculate the brake stroke}
  \note[item]{ensures it matches the sensitivity of 5.96}% Duty cycle per mm stroke
  \note[item]{The test also offers option to use a string potentiometer}
  \note[item]{this provides an analog voltage proportional to the brake stroke}
  \note[item]{read by ADC on the cortex-M4}
  \begin{block}{Purpose}
    \small{
      \begin{itemize}
        \item Developed firmware on the onboard Cortex-M4 microcontroller to validate BST
        \item Ensures brake actuation is accurate to distance moved by brake pedal
        \item \LightBold{Key Specifications:} Output range 1 mm to 9 mm, Sensitivity 5.96\% DC/mm, Output signals PWM1 and PWM2 (S1 and S2)
      \end{itemize}
    }
  \end{block}
  \hspace{-0.5cm}
  \begin{minipage}{0.485\textwidth}
    \begin{block}{Method}
      \small{
        \begin{itemize}
          \item \LightBold{Input Capture:} Timers captures read two PWM signals from the BST
          \item \LightBold{ADC Reading:}Optional string potentiometer for direct analog voltage measurements via ADC 
          \item \LightBold{Processing:} Calculates duty cycles, frequencies, and estimated stroke via timer interrupts
          \item \LightBold{Validation:} Compare measurements against expected values according to product specifications to verify BST accuracy
          \item \LightBold{Results:} Sends test results to the main processor for logging and user display
        \end{itemize}
      }
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.50\textwidth}
    \begin{figure}
      \centering
      \includegraphics[width=0.85\textwidth]{assets/specs/bst_product_specs.png}
      \caption{\it Product Specifications for BST}
    \end{figure}
  \end{minipage}
\end{frame}

% CWS Test implementation
\begin{frame}
    \frametitle{Firmware to Test Continuous Wear Sensor (CWS)}
  \note[item]{The Continuous Wear Seansor outputs analog voltages to indicate brake pad wear}
  \note[item]{ranges from 0.7V for new pads to 4.0V for worn pads.}
  \note[item]{The Cortex-M4 reads these voltages using Analog-to-Digital Converter or ADC}
  \note[item]{the firmware code maps the readings to pad thickness using linear calibration shown in graph}
    \begin{block}{Purpose}
        \small{
            \begin{itemize}
                \item Developed firmware on the onboard Cortex-M4 microcontroller to validate the Continuous Wear Sensor (CWS)
                \item Ensures accurate measurement of brake pad wear levels to enhance vehicle safety
                \item \LightBold{Key Specifications:} Output range 0.7V (18 mm or new pad) to 4.0 V (53 mm or worn pad), Sensitivity 0.08 V/mm, Voltage divider ratio 2:1
            \end{itemize}
        }
    \end{block}
    \hspace{-0.5cm}
    \begin{minipage}{0.485\textwidth}
        \begin{block}{Method}
            \small{
                \begin{enumerate}
                    \tiny
                    \item \LightBold{ADC Configuration:} Read direct analog voltage via ADC using DMA for efficiency and a timer trigger for consistency
                    \item \LightBold{Wear Calculation:} Mapped the measured voltage to brake pad wear using a linear relationship and handled special conditions (e.g., new pad, worn-out pad) with specific tolerances
                    \item \LightBold{Validation:} Compared wear values against expected values based on product specifications
                    \item \LightBold{Results:} Error thresholds to determine pass/fail and send detailed test outcomes to the main processor for logging and user display
                \end{enumerate}
            }
        \end{block}
    \end{minipage}
    \hfill
    \begin{minipage}{0.50\textwidth}
        \begin{figure}
            \centering
            \includegraphics[width=\textwidth]{assets/specs/cws_product_specs.png}
            \caption{\it Product Specifications for CWS}
        \end{figure}
        \vspace{0.2cm}
    \end{minipage}
\end{frame}

% PS Test implementation
\begin{frame}
    \frametitle{Firmware to Test Pressure Sensor}
  \note[item]{Similarly, the Pressure Sensor outputs voltages proportional to pressure}
  \note[item]{0.5V for 0 bar to 4.5V for 10 bar}
  \note[item]{The ADC reads these signals}
  \note[item]{our firmware converts them to meaningful pressure values}
  \note[item]{Both these tests incorporate thresholds to determine pass or fail outcomes}
  \note[item]{Validation in all test occurs on the Cortex-M4 }
  \note[item]{comparing calculated values with expected specifications.}
  \note[item]{Results are then sent to the Cortex-A7 }
  \note[item]{logged and displayed for user}
    \begin{block}{Purpose}
        \small{
            \begin{itemize}
                \item Developed firmware to validate Pressure Sensor readings on the Cortex-M4 microcontrooler
                \item Ensures accurate measurement of pressure when given for reliable vehicle control system purposes
                \item \LightBold{Key Specifications:} Output range 0.5V (0 bar) to 4.5 V (10 bar), Sensitivity 0.4 V/Bar, Voltage divider ratio 2:1
            \end{itemize}
        }
    \end{block}
    \hspace{-0.5cm}
    \begin{minipage}{0.485\textwidth}
        \begin{block}{Method}
            \small{
                \begin{enumerate}
                    \tiny
                    \item \LightBold{ADC Configuration:} Configured the ADC to read analog voltage from the Pressure Sensor using DMA for efficient data transfer and utilized a timer to trigger ADC conversions periodically
                    \item \LightBold{Pressure Calculation:} Mapped the measured voltage to pressure using a linear relationship given in the product specifications with the addition of converted pressure from bar to psi
                    \item \LightBold{Validation:} Compared calculated pressure against expected values based on product specifications with voltage tolerances to determine pass/fail status
                    \item \LightBold{Results:} Sent detailed test outcomes to the main processor for logging and user display
                \end{enumerate}
            }
        \end{block}
    \end{minipage}
    \hfill
    \begin{minipage}{0.50\textwidth}
        \begin{figure}
            \centering
            \includegraphics[width=\textwidth]{assets/specs/adc_product_specs.png}
            \caption{\it Product Specifications for CWS}
        \end{figure}
        \vspace{0.2cm}
    \end{minipage}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Embedded Linux
%==============================================================================

\subsection{Embedded Linux With Yocto Project}
% Consolidation slide since we need to go faster
\begin{frame}
  \frametitle{Embedded Linux and The Yocto Project}
  \begin{columns}
    \note[item]{due to time constrains i'll go over the contents of the following to slides}
    \note[item]{As i mentioned earlier, the application processor is runnning embedded linux}
    \note[item]{It gives a lot of benefits, namely its virtually the only option for any serious 
    embedded operating system}
    \note[item]{as it gives a rich ecosystem of open-source tools and software}

    \note[item]{The Yocto Project was used to build a custom linux distribution}
    \note[item]{Since it provides fine grain control of the resulting image that will be used
    on the device}
    \column{0.475\textwidth}
    \begin{block}{Embedded Linux}
      \begin{itemize}
        \item Industry standard for embedded Operating system
        \item Rich ecosystem of open-source tools and software
      \end{itemize}
    \end{block}
    \column{0.475\textwidth}
    \begin{block}{The Yocto Project}
      \begin{itemize}
        \item Collection of tools to build a \LightBold{custom} embedded Linux distribution
        \item Fine-grain control of every aspect of deployed image
      \end{itemize}
    \end{block}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Embedded Linux}
  \begin{figure}
    \includegraphics[width=175px]{assets/diagrams/embedded_linux.png}
    \centering
    \caption{\tiny Source:\underline{\href{https://bootlin.com/}{https://bootlin.com/}}\hspace{\textwidth}
    \textit{Embedded Linux system architecture}}
  \end{figure}
  \vspace{-16px}
  \begin{block}{Why use embedded Linux?}
    \small{
      \begin{itemize}
        \item Industry standard for any embedded operating system
        \item Access to open-source software (OSS) and tools
        \item Networking and connectivity made easy 
        \item Easily save/access data with filesystem
      \end{itemize}
    }
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Using The Yocto Project to Build a Custom Distribution}
  \begin{minipage}{0.475\textwidth}
    \begin{block}{What is the Yocto Project and why?}
        \begin{itemize}
          \item Most popular set of tools for embedded Linux Development
          \item Collection of OSS tools to make a custom Linux distribution
          \item Independent of target architecture
          \item \DarkBoldP{bitbake} build tool handles \LightBold{metadata}
          \item \LightBold{MetaData} can be in the form of 
            \begin{itemize}
              \item software build/patch instructions
              \item configuration files for software
            \end{itemize}
          \item \LightBold{MetaData} organized in its \LightBold{Layer Model}
        \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.475\textwidth}
    \begin{figure}
      \center
      \includegraphics[width=180px]{assets/diagrams/yocto-environment.png}
      \caption{Source: \href{https://docs.yoctoproject.org}{https://docs.yoctoproject.org}\hspace{\textwidth}
      \it High-level diagram representing how builds work using The Yocto Project}
    \end{figure}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Custom Linux Image for the STM32MP157F-DK2}
  \note{The yocto project was essential for building and configuring}
  \note[item]{hardware drivers}
  \note[item]{Linux Kernel configurations}
  \note[item]{Linux kernel device tree}
  \note[item]{and using the layer structure created by the yocto project a custom layer of meta-data was made to build
  and configure}
  \note[item]{nginx, a webserver to host the web application}
  \note[item]{wpa\_supplicant, a wi-fi access client}
  \note[item]{among the meta-data there were build recipes for}
  \note[item]{written programs like the web-application, web server, and the Cortex-M4 firmware}
  \note[item]{a custom kernel and and a custom devicetree}
  \begin{minipage}{0.475\textwidth}
    \begin{block}{What is used in the deployed image?}
      \begin{itemize}
        \item ST's BSP (board support package) layer provides metadata 
          \begin{itemize}
            \small
            \item Hardware drivers
            \item Kernel Configurations
            \item Devicetree
          \end{itemize}
        \item Custom layer \DarkBoldP{meta-zf-project}
          \begin{itemize}
            \small
            \item \DarkBold{nginx} (webserver), \DarkBold{wpa\_supplicant} (Wi-Fi access client/
              IEEE 802.1X supplicant)
            \item recipes for custom applications (Web application, Server, Cortex-M4 Firmware)
            \item Kernel configurations and custom Devicetree
          \end{itemize}
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.5\textwidth}
    \begin{figure}
      \includegraphics[width=1.125\textwidth]{assets/diagrams/layers.png}
      \caption{\it Layer Model representation of this project for deploying onto a STM32MP1-DK2}
    \end{figure}
  \end{minipage}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: IPC with OpenAMP
%==============================================================================
\subsection{Inter-Processor Communication}
\begin{frame}
  \frametitle{Inter-Process Communication on a Heterogenous Architecture}
  With a heterogenous architecture (ARM Cortex-A7 and ARM Cortex-M4) how can information be shared?\\
  \note[item]{a major problem to solve in this project was having the two processors communicate to eachother}
  \note[item]{the cortex-m4 and cortex-A7 are on the same system on chip so having them communicate is not for free}
  \note[item]{OpenAMP is a project that aims to solve this project by standardizing how heterogenous architectures
  communicate between cores}
  \note[item]{to briefly summarize how its used in this project:}
  \note[item]{it allows linux to load the cortex-M4 firmware after a device under test is determined}
  \note[item]{communication between the two processors is possible, with the cortex-m4 utilizing some 
  abstraction called virtuart and linux having a virtual file to read and write to}
  \note[item]{and logging from the cortex-m4 is done through writing to a linux kernel trace file, which
  will be used for logging the CSV data}
  {\em \scriptsize Hetergenous multiprocessor SoCs cannot directly communicate }
  \break
  \begin{minipage}{0.465\textwidth}
    \begin{block}{OpenAMP (Asymmetric Multi-Processing) Project}
      \footnotesize
      \begin{itemize}
        \item Software framework that places standard protocol for shared memory
        \item Implemented on top of \DarkBoldP{virtio} framework
        \item STM provides \DarkBoldP{virt\_uart} driver for recieving/transmitting messages
          over \DarkBoldP{RPMsg protocol}
        \item STMP1 layer automatically enables the \DarkBoldP{RPMSG tty driver} kernel module
          \begin{itemize}
              \tiny
            \item creates file in Linux filesystem: \DarkBoldP{/dev/ttyRPMSG<X>}
            \item can read and write to like a normal file
          \end{itemize}
        \item \DarkBoldP{remoteproc} framework allows dynamic and remote loading of Cortex-M4 firmware
        \item \LightBold{Resource Table} defined in firmware opens a trace in\\
          {\scriptsize\DarkBoldP{/sys/kernel/debug/remoteproc/remoteproc0/trace0}}
          \begin{itemize}
              \tiny
            \item Used for logging measured data in CSV format
          \end{itemize}
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.465\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/diagrams/ipc.drawio.png}
      \caption{Inter-processor communication between Cortex-A7 (Linux) and Cortex-M4 (Microcontroller)}
    \end{figure}
  \end{minipage}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Rust
%==============================================================================
\subsection{Web Application and Server}
\begin{frame}
  \frametitle{Rust}
  \note[item]{The Rust Programming language was used to write the following 2 pieces of software}
  \note[item]{as it is a modern and safe language that is being looked into as an alternative to the C programming language}
  \begin{minipage}{0.75\textwidth}
    The Rust programming language was used to write both major \\ 
    applications (web-based application and web server) for 2 main \\ reasons.
  \end{minipage}
  \hfill
  \begin{minipage}{0.20\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/misc/rewrite-it-in-rust.jpg}
      \caption{\it Ferris, universally accepted mascot of the Rust Programming language}
    \end{figure}

  \end{minipage}
  \hfill
  \vspace{-8px}
  \begin{block}{Memory Safety and Performance}
    \begin{itemize}
      \item A set of rules called \DarkBold{Ownership} enforced by compiler to prevent memory leaks
      \item \DarkBold{Borrow checker} within the compiler prevents programs unsafe programs from compiling*
      \item Nearly as or just as performant as C with \DarkBold{Zero Cost Abstractions}
      \item Advocated by/used by several United States goverment agencies:
        \begin{itemize}
          \item \LightBold{National Security Agency (NSA)} and 
            \LightBold{Cybersecurity and Infrastructure Security Agency (CISA)}
          \item \LightBold{Defense Advance Research Projects Agency} 
          \item \LightBold{The White House}
        \end{itemize}
    \end{itemize}
  \end{block}
\end{frame}

%==============================================================================
% DESIGN AND IMPLEMENTATION SECTION: Web-Assembly Application and Server
%==============================================================================

\begin{frame}
  \frametitle{Web-Application for User Interface}
  \note[item]{The way the tester interacts with our solution is through the web application as a web assembly application
  ,which is a modern solution to slow web programs which are usually written in javascript.}
  \note[item]{Web assembly is much faster than javascript as it is ran in web browsers as a compiled binary program}
  \note[item]{the web application allows a selection of the device they wish to test, and the starting of the test, which
  sends serialized JSON data to the web server which we will talk about next}
  \begin{minipage}{0.5\textwidth}
    \begin{block}{Web Application in WebAssembly (WASM)}
      \begin{itemize}
        \item WASM is a compiled, binary format executable 
        \item Much faster than traditional Javascript programs
        \item Using the Yew framework, written in Rust
      \end{itemize}
    \end{block}
    \begin{block}{Web application Features}
      \begin{itemize}
        \item Shows if application is connected to associated server
        \item Selection of different devices
        \item Shows progress and state of test
        \item Allows download to results in a CSV
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.4\textwidth}
    \begin{figure}
      \includegraphics[width=\textwidth]{assets/misc/webapp.png}
      \caption{\it Web application with dropdown selection of different devices}
    \end{figure}
  \end{minipage}
\end{frame}

\begin{frame}
  \frametitle{Custom API Web Server}
  \note{the web server, also developed in rust, has multiple responsabilities}
  \note[item]{it handles http requests from the web application}
  \note[item]{responsible for the interprocess communication between the two processors}
  \note[item]{it loads the firmware to the cortex-m4 from the information recieved by the web-application}
  \note[item]{It polls the Cortex-M4 for test completion and once it is, it saves the written data in the kernel trace
  and saves it for download}
  \note[item]{**image shows the debug logging of the server application}
  \begin{minipage}{0.5\textwidth}
    \begin{block}{Web Server features}
      \begin{itemize}
        \item Handles \DarkBoldP{HTTP requests} from web application
        \item Dynamically loads M4 Firmware for selected device with \DarkBoldP{remoteproc}
        \item Polls for results by reading and writing to \DarkBoldP{/dev/ttyRPMSG0} 
        \item Saves information from \DarkBoldP{/sys/kernel/debug/remoteproc/remoteproc0/trace0} as CSV for download
      \end{itemize}
    \end{block}
  \end{minipage}
  \hfill
  \begin{minipage}{0.4\textwidth}
    \begin{figure}
      \centering
      \includegraphics[width=\textwidth]{assets/misc/server1.png}
      \includegraphics[width=\textwidth]{assets/misc/server2.png}
      \caption{\it Console logging of server application}
    \end{figure}
  \end{minipage}
\end{frame}

\begin{frame}
  \note{this diagram shows a comprehensive interactions of all 3 moving parts of the project}
  \note[item]{it begins with the user choosing what device to test}
  \note[item]{it sends a HTTP request to the server and then loads the necessary firmware}
  \note[item]{once its loaded, a message is sent back to the server and the server updates the state of the 
  web application user interface}
  \note[item]{the server polls the test for completion and once it is, it notifies the server}
  \note[item]{the server again updates the user interface on the web application and also shows a button to
  download the CSV and to restart another test}
  \frametitle{Software Architecture}
  \begin{figure}
    \includegraphics[height=0.825\paperheight]{assets/diagrams/software_stack.drawio.png}
  \end{figure}
\end{frame}

\section{Verification}
\begin{frame}
  \begin{block}{Link to video demonstration}
    \note[item]{top center: BST physical setup with PCB and STM board}
    \note[item]{bottom center: Osciliscope visualization of PWM}
    \note[item]{top right: web application user interface}
    \note[item]{bottom right: live readings of PWMs with duty cycle and frequency}
    \note[item]{Right side: will be excel file}
    \href{https://dylxndy.xyz/senior-design-presentation/verification}
    {\color{lime}{\ul{https://dylxndy.xyz/senior-design-presentation/verification}}}
  \end{block}
\end{frame}

\section{Challenges}
\begin{frame}
  \frametitle{Challenges}
  \begin{itemize}
    \item System Clock configuration with Devicetree
    \item Timer configuration for PWM signals
    \item Mini-360 Buck Converter
    \item PCB Creation
  \end{itemize}
\end{frame}

\section{Future Work}
\begin{frame}
  \frametitle{Future Work}
  \begin{itemize}
    \item Finish CAN implementation for ESCM
      \begin{itemize}
        \item USB to CAN used currently
        \item enabled \DarkBoldP{CAN\_GS\_USB} module in Linux Kernel
      \end{itemize}
    \item Improve Web application appearance
    \item Have test acception criteria by provided by user rather than hard-coded
    \item Professional-Grade Enclosure and Connectors
      \begin{itemize}
        \item Current design uses 3D-printed enclosure and wires connected directly to the poles
        \item	upgrading to more professional standard similar to the mBSP tester would greatly enhance usability and durability even further

      \end{itemize}

  \end{itemize}

\end{frame}

\section{Closing}
\begin{frame}
  \frametitle{Special Thanks}
  \begin{itemize}
    \item Dr. Grantner (faculty advisor)
    \item David Florida (lab technician)
    \item Patrick McNally (Head of Engineering at ZF Group - Auburn Hills, MI)
    \item Davis Roman (Senior Staff Software Engineer at Rivian - Palo Alto, CA)
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Thank you}
  Any Questions?
  \begin{block}{Project Sources}
  \note[item]{some note here}
    \begin{itemize}
      \item \DarkBoldP{Custom Yocto Project Layer:}
        \begin{itemize}
          \item \url{https://github.com/DMGDy/meta-zf-project}
        \end{itemize}
      \item \DarkBoldP{Custom Web Server in Rust} 
        \begin{itemize}
          \item \url{https://github.com/DMGDy/zf-webserver-app}
        \end{itemize}
      \item \DarkBoldP{Web Application in WASM}
        \begin{itemize}
          \item  \url{https://github.com/DMGDy/zf-yew-app}
        \end{itemize}
      \item \DarkBoldP{Microcontroller Firmware}
        \begin{itemize}
          \item \url{https://github.com/danb127/Brake-System-Tester}
        \end{itemize}
      \item \DarkBoldP{This Presentation}
        \begin{itemize}
          \item \url{https://github.com/DMGDy/ECE4820-Presentation}
        \end{itemize}
    \end{itemize}
  \end{block}
\end{frame}

\end{document}
